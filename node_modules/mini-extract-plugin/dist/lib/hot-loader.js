"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const path_1 = __importDefault(require("path"));
const loader_utils_1 = __importDefault(require("loader-utils"));
function hotLoader(content, context) {
    const accept = context.locals
        ? ''
        : `module.hot.accept(undefined, ${context.type}Reload);`;
    return `${content}
    if(module.hot) {
      // ${Date.now()}
      var ${context.type}Reload = require(${loader_utils_1.default.stringifyRequest(context.context, path_1.default.join(__dirname, 'hmr/hotModuleReplacement.js'))})(module.id, ${JSON.stringify(Object.assign(Object.assign({}, context.options), { locals: !!context.locals }))});
      module.hot.dispose(${context.type}Reload);
      ${accept}
    }
  `;
}
exports.default = hotLoader;
